<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="css/font.css">
        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/index.css">
        <link rel="stylesheet" href="/css/message.css">
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <div id="noCognitoMessage" class="configMessage" style="display: none;">
            <div class="backdrop"></div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">No Cognito User Pool Configured</h3>
                </div>
                <div class="panel-body">
                    <p>There is no user pool configured in <a href="/js/config.js">/js/config.js</a>. You'll configure this in Module 2 of the workshop.</p>
                </div>
            </div>
        </div>

        <section class="form-wrap">
            <h1>Register</h1>
            <form id="registrationForm">
              <input type="email" id="emailInputRegister" placeholder="Email" pattern=".*" required>
              <input type="password" id="passwordInputRegister" placeholder="Password" pattern=".*" required>
              <input type="text" id="nameRegister" placeholder="Name" pattern=".*" required>
              <input type="text" id="professionRegister" placeholder="Profession" pattern=".*" required>
              <input type="text" id="nationalityRegister" placeholder="Nationality" pattern=".*" required>
              <input type="text" id="purposeRegister" placeholder="Purpose of visit" pattern=".*" required>
              <input type="text" id="foodprefRegister" placeholder="Food preference" pattern=".*" required>
              <input type="submit" onclick="click()" value="Let's go">

            </form>
        </section>

<script>
function click() {
var http = new XMLHttpRequest();
var url = 'https://5umpqvqsxj.execute-api.us-east-1.amazonaws.com/pre-prod';
var email= document.getElementById(emailInputRegister)
var name= document.getElementById(nameRegister)
var prof= document.getElementById(professionRegister)
var nationality= document.getElementById(nationalityRegister)
var purpose= document.getElementById(purposeRegister)
var food_pref= document.getElementById(foodprefRegister)
var params = 'email='+email+'&name='+name+'&prof='+prof+'&nationality='+nationality+'&purpose='+purpose+'&food_pref='+food_pref;
http.open('POST', url, true);
http.send(params);
http.onreadystatechange = function() {//Call a function when the state changes.
    if(http.readyState == 4 && http.status == 200) {
        window.location.href = "https://master.ddbif0n99td4d.amplifyapp.com/ride.html";
    }
}

}
</script>

        <script src="js/vendor/jquery-3.1.0.js"></script>
        <script src="js/vendor/bootstrap.min.js"></script>
        <script src="js/vendor/aws-cognito-sdk.min.js"></script>
        <script src="js/vendor/amazon-cognito-identity.min.js"></script>
        <script src="js/config.js"></script>
        <script src="js/cognito-auth.js"></script>
    </body>
</html>
